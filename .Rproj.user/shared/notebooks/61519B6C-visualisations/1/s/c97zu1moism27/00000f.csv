"0","#| label: prep world vizualisations"
"0","world <- ne_countries(scale = ""medium"", returnclass = ""sf"") |> "
"0","  mutate(countrycode_c = countrycode(as.numeric(iso_n3_eh), origin = ""iso3n"","
"0","                                     destination = ""iso3c""))"
"2","Warning: [38;5;254mThere was 1 warning in `stopifnot()`.[39m
[38;5;254m[36mℹ[38;5;254m In argument: `countrycode_c = countrycode(as.numeric(iso_n3_eh), origin =
  ""iso3n"", destination = ""iso3c"")`.[39m
Caused by warning:
[33m![39m Some values were not matched unambiguously: -99"
"0","merged_world <- merged |>"
"0","  mutate(putin_full = if_else(countrycode_c == ""TUR"", putin_cec, putin_full),"
"0","         davankov_full = if_else(countrycode_c == ""TUR"", davankov_cec, davankov_full),"
"0","         spoiled_full = if_else(countrycode_c == ""TUR"", spoiled_cec, spoiled_full)) |> "
"0","  group_by(countryname_en, countryname_ru, countrycode_c, countrycode_n) |> "
"0","  filter(!countryname_ru %in% c(""Абхазия"", ""Южная Осетия"")) |> "
"0","  summarise(putin_full = mean(putin_full),"
"0","            davankov_full = mean(davankov_full),"
"0","            spoiled_full = mean(spoiled_full)) |> "
"0","  mutate(result = case_when(putin_full > 0.5 ~ ""Putin"","
"0","                            davankov_full > 0.5 ~ ""Davankov"","
"0","                            davankov_full <= 0.5 & putin_full <= 0.5 ~ ""Second Round"","
"0","                            .default = ""Oops""),"
"0","         result2 = case_when((davankov_full + spoiled_full) > putin_full"
"0","                             ~ ""Davankov + Spoiled"","
"0","                             putin_full > (davankov_full + spoiled_full) ~ ""Putin"","
"0","                             putin_full == (davankov_full + spoiled_full) ~ ""Tie"","
"0","                             .default = ""Oops""),"
"0","         result3 = case_when(davankov_full > putin_full"
"0","                             ~ ""Davankov"","
"0","                             putin_full > davankov_full ~ ""Putin"","
"0","                             putin_full == davankov_full ~ ""Tie"","
"0","                             .default = ""Oops"")) |> "
"0","  full_join(world, by = ""countrycode_c"") |>"
"0","  st_as_sf()"
"2","`summarise()` has grouped output by 'countryname_en', 'countryname_ru', 'countrycode_c'. You can override using the `.groups` argument."
"2","Warning: Detected an unexpected many-to-many relationship between `x` and `y`."
"0","putin_quant = classIntervals(c(min(merged_world$putin_full) - .00001,"
"0","                               merged_world$putin_full), n = 9, style = ""quantile"")"
"2","Warning: var has missing values, omitted in finding classes"
"0","davankov_quant = classIntervals(c(min(merged_world$davankov_full) - .00001,"
"0","                               merged_world$davankov_full), n = 4, style = ""quantile"")"
"2","Warning: var has missing values, omitted in finding classes"
"0","spoiled_quant = classIntervals(c(min(merged_world$spoiled_full) - .00001,"
"0","                               merged_world$spoiled_full), n = 4, style = ""quantile"")"
"2","Warning: var has missing values, omitted in finding classes"
