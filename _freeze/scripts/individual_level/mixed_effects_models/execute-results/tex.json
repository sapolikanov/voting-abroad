{
  "hash": "a5cbdcc679c1f5574356b5727c63232c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Individual-level analysis: mixed effects models\"\nsubtitle: \"Part of the final project for AQMSS II\"\nauthor: \"Polikanov Stepan and Okisheva Vera\"\nformat:\n  pdf:\n    fig-pos: \"H\"\n    fontsize: 11pt\n    highlight-style: kate\n    fig-width: 10\n    fig-height: 6\n    include-in-header:\n      - text: |\n          \\addtokomafont{disposition}{\\rmfamily} \n          \\AddToHook{env/Highlighting/begin}{\\scriptsize} \n          \\usepackage{float} \n          \\usepackage[backend = biber, style = apa]{biblatex}\nembed-resources: true\nexecute: \n  echo: true\n  warning: false\n  error: false\n  message: false\n---\n\n\n# Mixed effects models\n\n## Nested Logit\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource(here::here(\"utilities\", \"check_packages.R\"))\nsource(here::here(\"utilities\", \"functions.R\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nep_raw_dep <- read_rds(here(\"data\", \"data_built\", \"ep_raw_dep.rds\"))\ndata_country <- read_rds(here(\"data\", \"data_built\", \"data_country.rds\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nload(here(\"scripts\", \"models\", \"feme_bobyqa.RData\"))\nload(here(\"scripts\", \"models\", \"nlme_bobyqa.RData\"))\nload(here(\"scripts\", \"models\", \"me_allfit.RData\"))\nload(here(\"scripts\", \"models\", \"nl_fe.RData\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode no data back to native NA\nmodel_data <- ep_raw_dep |> \n  mutate(across(c(sex, age_bin, time_to_vs.less_than_hour, \n                  time_to_vs.less_than_hour, out_of_Russia_time, \n                  result_trust_bin), \n                ~ if_else(. %in% c(\"No Data\", \"Declined to answer\"), NA, .)),\n         vote = relevel(as.factor(vote), ref = \"Putin\"),\n         sex = relevel(as.factor(sex), ref = \"Male\"),\n         age_bin = relevel(as.factor(age_bin), ref = \"25-44\"),\n         out_of_Russia_time = relevel(as.factor(out_of_Russia_time), ref = \"Before annexation\"),\n         result_trust_bin = relevel(as.factor(result_trust_bin), ref = \"Yes\")) |> \n  filter(!countryname_en %in% c(\"New Zealand\", \"Australia\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Drop Australia and New Zealand for this because they have very skewed and low \n# n observations. Might also help with convergence\nnested_me_data <- model_data |>\n  filter(vote != \"Tore up/took\", !countryname_en %in% c(\"Australia\",\n                                                        \"New Zealand\")) |>\n  mutate(non_answer = if_else(vote == \"Declined to answer\", 1, 0),\n         putin_else = case_when(vote == \"Putin\" ~ 1,\n                                vote %in% c(\"Davankov\", \"Spoiled ballot\",\n                                            \"Slutsky\", \"Haritonov\") ~ 0,\n                                .default = NA),\n         nonsys_sys = case_when(vote %in% c(\"Davankov\", \"Spoiled ballot\") ~ 1,\n                                vote %in% c(\"Slutsky\", \"Haritonov\") ~ 0,\n                                .default = NA),\n         davankov_spoiled = case_when(vote == \"Davankov\" ~ 1,\n                                      vote == \"Spoiled ballot\" ~ 0,\n                                      .default = NA),\n         slutsky_haritonov = case_when(vote == \"Slutsky\" ~ 1,\n                                       vote == \"Haritonov\" ~ 0,\n                                       .default = NA)) |> \n  left_join(select(data_country,\n                   -countryname_en), \n            by = c(\"countrycode_n\", \"countrycode_c\"))\n```\n:::\n\n\nWe fit the model consecutively for each dichotomy this time separating data by hand in the same way as the ``nestedLogit`` package does.\n\nFor some models we get non-convergence. We diagnose which optimizers work best in those case and update the model to achieve convergence.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Answer (1) vs non-answer (0)\nm4a.nested <- glmer(non_answer ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\"))\n```\n:::\n\n\n### Not answer v answer\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Use bobyqa\nm5a.nested <- glmer(non_answer ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + orthodox_share + vdem_polyarchy_2022 \n                    + log(mad_gdppc_2018) + obl_type + export_share\n                    + import_share + friendly_status + help + military_dummy\n                    + log(dist) + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\",\n                                           optCtrl = list(maxfun = 1e9)))\n\n# Doesn't converge\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit with all optimizers\nm5a.allfit <- allFit(m5a.nested, maxfun = 1e9)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nbobyqa : [OK]\nNelder_Mead : [OK]\nnlminbwrap : [OK]\noptimx.L-BFGS-B : [OK]\nnloptwrap.NLOPT_LN_NELDERMEAD : [OK]\nnloptwrap.NLOPT_LN_BOBYQA : [OK]\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convergence results\n  \n  ## Export models\n  m5a.allfit_OK <- m5a.allfit[sapply(m5a.allfit, is, \"merMod\")]\n  \n  ## Generate warnings encountered\n  data.frame(lapply(m5a.allfit_OK, function(x) x@optinfo$conv$lme4$messages)) |> \n    pivot_longer(everything(), names_to = \"Method\",\n                 values_to = \"Estimation result\") |> \n    arrange(`Method`, `Estimation result`) |> \n    distinct() |> \n    mutate(`Method` = if_else(lag(`Method`) != `Method` | is.na(lag(`Method`)), \n                              `Method`, \"\"),\n           `Estimation result` = gsub(\"\\\\|\", \" \", `Estimation result`)) |> \n    kable(booktabs = T,\n          caption = paste(\"Convergence results for Answer/non-Answer dichotomy,\", \n                          \"ME with level 2 variables and all optimizers\")) |> \n    column_spec(1, width = \"8cm\") |> \n    column_spec(2, width = \"8cm\")\n```\n\n::: {.cell-output-display}\n\n\\begin{longtable}[t]{>{\\raggedright\\arraybackslash}p{8cm}>{\\raggedright\\arraybackslash}p{8cm}}\n\\caption{\\label{tab:nested-logit-mixed-effects-m5a-answer-lvl2-diagnostics}Convergence results for Answer/non-Answer dichotomy, ME with level 2 variables and all optimizers}\\\\\n\\toprule\nMethod & Estimation result\\\\\n\\midrule\nNelder\\_Mead & Model failed to converge with max grad  = 0.0288314 (tol = 0.002, component 1)\\\\\nbobyqa & Model failed to converge with max grad  = 0.00240407 (tol = 0.002, component 1)\\\\\nnlminbwrap & Model failed to converge with max grad  = 0.071349 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_BOBYQA & Model failed to converge with max grad  = 0.0450179 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_NELDERMEAD & Model failed to converge: degenerate  Hessian with 1 negative eigenvalues\\\\\n\\addlinespace\n & unable to evaluate scaled \\vphantom{1} gradient\\\\\noptimx.L.BFGS.B & Model failed to converge: degenerate  Hessian with 1 negative eigenvalues\\\\\n & unable to evaluate scaled gradient\\\\\n\\bottomrule\n\\end{longtable}\n\n\n:::\n\n```{.r .cell-code}\n# Log-Likelihoods\n(lliks <- sort(sapply(m5a.allfit_OK, logLik))) |> \n  kable(col.names = \"Log-likelihood\", booktabs = T, digits = 3)\n```\n\n::: {.cell-output-display}\n\n\n|                              | Log-likelihood|\n|:-----------------------------|--------------:|\n|optimx.L-BFGS-B               |      -8472.303|\n|Nelder_Mead                   |      -8472.302|\n|nloptwrap.NLOPT_LN_BOBYQA     |      -8472.302|\n|nlminbwrap                    |      -8472.302|\n|bobyqa                        |      -8472.302|\n|nloptwrap.NLOPT_LN_NELDERMEAD |      -8472.302|\n\n\n:::\n\n```{.r .cell-code}\n# Coefficients from different optimizers\n  \n  ## Export fixef and melt into single dataframe\n  models <- levels(melt(t(sapply(m5a.allfit_OK, fixef)))$Var1)\n  m5a.allfit.fixef.m <- transform(melt(t(sapply(m5a.allfit_OK, fixef))), \n                                  Var1 = factor(Var1, levels = names(lliks))) |> \n    transmute(`Method` = Var1,\n              `Coefficient` = value,\n              `Variable` = case_when(\n                Var2 == \"(Intercept)\" ~ \"Intercept\",\n                Var2 == \"sexFemale\" ~ \"Sex: Female\",\n                Var2 == \"sexOther\" ~ \"Sex: Other\",\n                Var2 == \"age_bin18-24\" ~ \"Age: 18-24 (ref 25-44)\",\n                Var2 == \"age_bin45-64\" ~ \"Age: 45-65 (ref 25-44)\",\n                Var2 == \"age_bin65+\" ~ \"Age: 65 + (ref 25-44)\",\n                Var2 == \"time_to_vs.less_than_hourYes\" ~ \n                  \"Took < 1 hour to get to the voting station\",\n                Var2 == \"out_of_Russia_timeAfter invasion\" ~\n                  \"Moved after March 2022 (ref before 2014)\",\n                Var2 == \"out_of_Russia_time2 - 5 years\" ~\n                  paste(\"Moved after March 2019 but before\",\n                        \"March 2022 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeAfter annexation\" ~\n                  paste(\"Moved after March 2014 but before\",\n                        \"March 2019 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeTourist (lives in Russia)\" ~\n                  paste(\"Didn't move - tourist, lives\",\n                        \"in Russia (ref before 2014)\"),\n                Var2 == \"result_trust_binDon't know\" ~\n                  \"Trust in the result: Don't know (ref Yes)\",\n                Var2 == \"result_trust_binNo\" ~\n                  \"Trust in the result: No (ref Yes)\",\n                Var2 == \"orthodox_share\" ~ \"Share of Orthodox Christians\",\n                Var2 == \"vdem_polyarchy_2022\" ~ \"Polyarchy index\",\n                Var2 == \"log(mad_gdppc_2018)\" ~ \"GDP per capita (log)\",\n                Var2 == \"obl_type1\" ~ \"Military agreements: 1 (ref 0)\",\n                Var2 == \"obl_type2\" ~ \"Military agreements: 2 (ref 0)\",\n                Var2 == \"obl_type3\" ~ \"Military agreements: 3 (ref 0)\",\n                Var2 == \"obl_type4\" ~ \"Military agreements: 4 (ref 0)\",\n                Var2 == \"export_share\" ~ \"Export share\",\n                Var2 == \"import_share\" ~ \"Import share\",\n                Var2 == \"friendly_statusUnfriendly\" ~ \n                  \"Unfriendly status (ref Neutral)\",\n                Var2 == \"friendly_statusFriendly\" ~ \n                  \"Friendly status (ref Neutral)\",\n                Var2 == \"help\" ~ \"Help to Ukraine\",\n                Var2 == \"military_dummy\" ~ \"Russian military presence\",\n                Var2 == \"log(dist)\" ~ \"Geodesic distance (log)\"),\n              )\n  \n  ## Plot \n  ggplot(m5a.allfit.fixef.m, \n           aes(x = `Coefficient`, y = `Method`, colour = `Method`)) +\n      geom_point() +\n      facet_wrap(~ `Variable`, scale = \"free\") +\n      scale_colour_brewer(palette = \"Dark2\") +\n      scale_y_discrete(breaks = models,\n                       labels = substr(models, 1, 3)) +\n      labs(x = \"\", y = \"\") + \n      theme_minimal() +\n      theme(legend.position = \"none\",\n            axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](mixed_effects_models_files/figure-pdf/nested-logit-mixed-effects-m5a-answer-lvl2-diagnostics-1.pdf)\n:::\n\n```{.r .cell-code}\n# So judging by this I leave the model alone - the coefficients seem to be okay \n# between different optimizers and since bobyqa comes close to the tolerance \n# threshold, I will use it.\n\n# Check m5a-specific diagnostics\n# Gradient 1\n  derivs1 <- m5a.nested@optinfo$derivs\n  sc_grad1 <- with(derivs1, solve(Hessian, gradient))\n  gradres1 <- max(pmin(abs(sc_grad1), abs(derivs1$gradient)))\n\n# Gradient 2\n  dd <- update(m5a.nested, devFunOnly = TRUE)\n  pars <- unlist(getME(m5a.nested, c(\"theta\", \"fixef\")))\n  grad2 <- grad(dd, pars)\n  hess2 <- hessian(dd, pars)\n  sc_grad2 <- solve(hess2, grad2)\n  gradres2 <- max(pmin(abs(sc_grad2), abs(grad2)))\n\n  ## The gradient cutoffs for Nelder Mead (nlopt), bobyqa and nlminwrap seem to \n  ## be close to what I am getting. \n\n# Check for singular fit \nsingres <- if_else(isSingular(m5a.nested), \"Yes\", \"No\")\n  \n# Display diagnostics\nkable(cbind(gradres1, gradres2, singres), \n      booktabs = T, digits = 3,\n      col.names = c(\"Gradient, method I\", \"Gradient, method II\", \n                    \"Singular fit?\"),\n      caption = paste(\"Diagnostics for `Answer vs No answer to poll`\", \n                      \"model (with preferred optimizer)\"))\n```\n\n::: {.cell-output-display}\n\n\nTable: Diagnostics for `Answer vs No answer to poll` model (with preferred optimizer)\n\n|Gradient, method I  |Gradient, method II |Singular fit? |\n|:-------------------|:-------------------|:-------------|\n|0.00240406734519638 |0.00243011504717848 |No            |\n\n\n:::\n:::\n\n\nThe model doesn't converge. \n\n### Putin v everyone else\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Putin (1) vs everyone else (0), declined to answer NA\nm4p.nested <- glmer(putin_else ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\"))\n\n# Converges!\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nm5p.nested <- glmer(putin_else ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + orthodox_share + vdem_polyarchy_2022 \n                    + log(mad_gdppc_2018) + obl_type + export_share\n                    + import_share + friendly_status + help + military_dummy\n                    + log(dist) + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\", \n                                           optCtrl = list(maxfun = 1e9)))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit with all optimizers (loaded with other models)\nm5p.allfit <- allFit(m5p.nested, maxfun = 1e9)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nbobyqa : [OK]\nNelder_Mead : [OK]\nnlminbwrap : [OK]\noptimx.L-BFGS-B : [OK]\nnloptwrap.NLOPT_LN_NELDERMEAD : [OK]\nnloptwrap.NLOPT_LN_BOBYQA : [OK]\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convergence results\n  \n  ## Export models\n  m5p.allfit_OK <- m5p.allfit[sapply(m5p.allfit, is, \"merMod\")]\n  \n  ## Generate warnings encountered\n  data.frame(lapply(m5p.allfit_OK, function(x) x@optinfo$conv$lme4$messages)) |> \n    pivot_longer(everything(), names_to = \"Method\",\n                 values_to = \"Estimation result\") |> \n    arrange(`Method`, `Estimation result`) |> \n    distinct() |> \n    mutate(`Method` = if_else(lag(`Method`) != `Method` | is.na(lag(`Method`)), \n                              `Method`, \"\"),\n           `Estimation result` = gsub(\"\\\\|\", \" \", `Estimation result`)) |> \n    kable(booktabs = T,\n          caption = paste(\"Convergence results for Answer/non-Answer dichotomy,\", \n                          \"ME with level 2 variables and all optimizers\")) |> \n    column_spec(1, width = \"8cm\") |> \n    column_spec(2, width = \"8cm\")\n```\n\n::: {.cell-output-display}\n\n\\begin{longtable}[t]{>{\\raggedright\\arraybackslash}p{8cm}>{\\raggedright\\arraybackslash}p{8cm}}\n\\caption{\\label{tab:nested-logit-mixed-effects-m5p-putin-lvl2-diagnostics}Convergence results for Answer/non-Answer dichotomy, ME with level 2 variables and all optimizers}\\\\\n\\toprule\nMethod & Estimation result\\\\\n\\midrule\nNelder\\_Mead & Model failed to converge with max grad  = 0.0439094 (tol = 0.002, component 1)\\\\\nbobyqa & Model failed to converge with max grad  = 0.00486188 (tol = 0.002, component 1)\\\\\nnlminbwrap & Model failed to converge with max grad  = 0.0198981 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_BOBYQA & Model failed to converge with max grad  = 0.0277748 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_NELDERMEAD & Model failed to converge with max grad  = 0.0240685 (tol = 0.002, component 1)\\\\\n\\addlinespace\noptimx.L.BFGS.B & Model failed to converge with max grad  = 0.0818325 (tol = 0.002, component 1)\\\\\n\\bottomrule\n\\end{longtable}\n\n\n:::\n\n```{.r .cell-code}\n# Log-Likelihoods\n(lliks <- sort(sapply(m5p.allfit_OK, logLik))) |> \n  kable(col.names = \"Log-likelihood\", booktabs = T, digits = 3)\n```\n\n::: {.cell-output-display}\n\n\n|                              | Log-likelihood|\n|:-----------------------------|--------------:|\n|Nelder_Mead                   |      -3178.423|\n|nloptwrap.NLOPT_LN_BOBYQA     |      -3178.423|\n|optimx.L-BFGS-B               |      -3178.423|\n|nlminbwrap                    |      -3178.423|\n|nloptwrap.NLOPT_LN_NELDERMEAD |      -3178.423|\n|bobyqa                        |      -3178.423|\n\n\n:::\n\n```{.r .cell-code}\n# Coefficients from different optimizers\n  \n  ## Export fixef and melt into single dataframe\n  models <- levels(melt(t(sapply(m5p.allfit_OK, fixef)))$Var1)\n  m5p.allfit.fixef.m <- transform(melt(t(sapply(m5p.allfit_OK, fixef))), \n                                  Var1 = factor(Var1, levels = names(lliks))) |> \n    transmute(`Method` = Var1,\n              `Coefficient` = value,\n              `Variable` = case_when(\n                Var2 == \"(Intercept)\" ~ \"Intercept\",\n                Var2 == \"sexFemale\" ~ \"Sex: Female\",\n                Var2 == \"sexOther\" ~ \"Sex: Other\",\n                Var2 == \"age_bin18-24\" ~ \"Age: 18-24 (ref 25-44)\",\n                Var2 == \"age_bin45-64\" ~ \"Age: 45-65 (ref 25-44)\",\n                Var2 == \"age_bin65+\" ~ \"Age: 65 + (ref 25-44)\",\n                Var2 == \"time_to_vs.less_than_hourYes\" ~ \n                  \"Took < 1 hour to get to the voting station\",\n                Var2 == \"out_of_Russia_timeAfter invasion\" ~\n                  \"Moved after March 2022 (ref before 2014)\",\n                Var2 == \"out_of_Russia_time2 - 5 years\" ~\n                  paste(\"Moved after March 2019 but before\",\n                        \"March 2022 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeAfter annexation\" ~\n                  paste(\"Moved after March 2014 but before\",\n                        \"March 2019 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeTourist (lives in Russia)\" ~\n                  paste(\"Didn't move - tourist, lives\",\n                        \"in Russia (ref before 2014)\"),\n                Var2 == \"result_trust_binDon't know\" ~\n                  \"Trust in the result: Don't know (ref Yes)\",\n                Var2 == \"result_trust_binNo\" ~\n                  \"Trust in the result: No (ref Yes)\",\n                Var2 == \"orthodox_share\" ~ \"Share of Orthodox Christians\",\n                Var2 == \"vdem_polyarchy_2022\" ~ \"Polyarchy index\",\n                Var2 == \"log(mad_gdppc_2018)\" ~ \"GDP per capita (log)\",\n                Var2 == \"obl_type1\" ~ \"Military agreements: 1 (ref 0)\",\n                Var2 == \"obl_type2\" ~ \"Military agreements: 2 (ref 0)\",\n                Var2 == \"obl_type3\" ~ \"Military agreements: 3 (ref 0)\",\n                Var2 == \"obl_type4\" ~ \"Military agreements: 4 (ref 0)\",\n                Var2 == \"export_share\" ~ \"Export share\",\n                Var2 == \"import_share\" ~ \"Import share\",\n                Var2 == \"friendly_statusUnfriendly\" ~ \n                  \"Unfriendly status (ref Neutral)\",\n                Var2 == \"friendly_statusFriendly\" ~ \n                  \"Friendly status (ref Neutral)\",\n                Var2 == \"help\" ~ \"Help to Ukraine\",\n                Var2 == \"military_dummy\" ~ \"Russian military presence\",\n                Var2 == \"log(dist)\" ~ \"Geodesic distance (log)\"),\n              )\n  \n  ## Plot\n  ggplot(m5p.allfit.fixef.m, \n         aes(x = `Coefficient`, y = `Method`, colour = `Method`)) +\n      geom_point() +\n      facet_wrap(~ `Variable`, scale = \"free\") +\n      scale_colour_brewer(palette = \"Dark2\") +\n      scale_y_discrete(breaks = models,\n                       labels = substr(models, 1, 3)) +\n      labs(x = \"\", y = \"\") + \n      theme_minimal() +\n      theme(legend.position = \"none\",\n            axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](mixed_effects_models_files/figure-pdf/nested-logit-mixed-effects-m5p-putin-lvl2-diagnostics-1.pdf)\n:::\n\n```{.r .cell-code}\n# Check m5p-specific diagnostics\n  \n# Gradient 1\n  derivs1 <- m5p.nested@optinfo$derivs\n  sc_grad1 <- with(derivs1, solve(Hessian, gradient))\n  gradres1 <- max(pmin(abs(sc_grad1), abs(derivs1$gradient)))\n\n# Gradient 2\n  dd <- update(m5p.nested, devFunOnly = TRUE)\n  pars <- unlist(getME(m5p.nested, c(\"theta\", \"fixef\")))\n  grad2 <- grad(dd, pars)\n  hess2 <- hessian(dd, pars)\n  sc_grad2 <- solve(hess2, grad2)\n  gradres2 <- max(pmin(abs(sc_grad2), abs(grad2)))\n\n  ## The gradient cutoffs for Nelder Mead (nlopt), bobyqa and nlminwrap seem to \n  ## be close to what I am getting. \n\n# Check for singular fit \nsingres <- if_else(isSingular(m5p.nested), \"Yes\", \"No\")\n  \n# Display diagnostics\nkable(cbind(gradres1, gradres2, singres),\n      booktabs = T, digits = 3,\n      col.names = c(\"Gradient, method I\", \"Gradient, method II\", \n                    \"Singular fit?\"),\n      caption = paste(\"Diagnostics for `Putin vs Everyone\", \n                      \"else` model (with preferred optimizer)\"))\n```\n\n::: {.cell-output-display}\n\n\nTable: Diagnostics for `Putin vs Everyone else` model (with preferred optimizer)\n\n|Gradient, method I |Gradient, method II |Singular fit? |\n|:------------------|:-------------------|:-------------|\n|0.0132050081447233 |0.0131996664023155  |No            |\n\n\n:::\n:::\n\n\n### Non-systemic v systemic opposition\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Non-systemic - Davankov or Spoiled (1) vs systemic - Haritonov, Slutsky (0) \n# opposition, declined to answer and Putin are NA\nm4s.nested <- glmer(nonsys_sys ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\"))\n\n# Converges\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nm5s.nested <- glmer(nonsys_sys ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + orthodox_share + vdem_polyarchy_2022 \n                    + log(mad_gdppc_2018) + obl_type + export_share\n                    + import_share + friendly_status  + help + military_dummy\n                    + log(dist) + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\", \n                                           optCtrl = list(maxfun = 1e9)))\n\n# Singular fit! \n\n# The predictors most likely to cause issues are obl_type and friendly_status\n# as they are broadly (and correlated between themselves and other variables) \n# defined dichotomous predictors. Remove them from the model and try again\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nm5s.red <- update(m5s.nested, ~ . - obl_type - friendly_status)\n\n# Works great and no issues with convergence either\n```\n:::\n\n\n\n### Davankov v spoiled\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Davankov (1) vs Spoiled (0) declined to answer, Haritonov, Slutsky and Putin\n# are NA\nm4d.nested <- glmer(davankov_spoiled ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nm5d.nested <- glmer(davankov_spoiled ~ sex + age_bin + time_to_vs.less_than_hour\n                    + out_of_Russia_time + result_trust_bin\n                    + orthodox_share + vdem_polyarchy_2022 \n                    + log(mad_gdppc_2018) + obl_type + export_share\n                    + import_share + friendly_status  + help + military_dummy\n                    + log(dist) + (1 | countryname_en), \n                    data = nested_me_data, family = binomial,\n                    control = glmerControl(optimizer = \"bobyqa\", \n                                           optCtrl = list(maxfun = 1e9)))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nm5d.allfit <- allFit(m5d.nested, maxfun = 1e9)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nbobyqa : [OK]\nNelder_Mead : [OK]\nnlminbwrap : [OK]\noptimx.L-BFGS-B : [OK]\nnloptwrap.NLOPT_LN_NELDERMEAD : [OK]\nnloptwrap.NLOPT_LN_BOBYQA : [OK]\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convergence results\n  \n  ## Export models\n  m5d.allfit_OK <- m5d.allfit[sapply(m5d.allfit, is, \"merMod\")]\n  \n  ## Generate warnings encountered\n  data.frame(lapply(m5d.allfit_OK, function(x) x@optinfo$conv$lme4$messages)) |> \n    pivot_longer(everything(), names_to = \"Method\",\n                 values_to = \"Estimation result\") |> \n    arrange(`Method`, `Estimation result`) |> \n    distinct() |> \n    mutate(`Method` = if_else(lag(`Method`) != `Method` | is.na(lag(`Method`)), \n                              `Method`, \"\"),\n           `Estimation result` = gsub(\"\\\\|\", \" \", `Estimation result`)) |> \n    kable(booktabs = T,\n          caption = paste(\"Convergence results for Answer/non-Answer dichotomy,\", \n                          \"ME with level 2 variables and all optimizers\")) |> \n    column_spec(1, width = \"8cm\") |> \n    column_spec(2, width = \"8cm\")\n```\n\n::: {.cell-output-display}\n\n\\begin{longtable}[t]{>{\\raggedright\\arraybackslash}p{8cm}>{\\raggedright\\arraybackslash}p{8cm}}\n\\caption{\\label{tab:nested_logit_mixed_effects_m5d_davankov_lvl2_diagnostics}Convergence results for Answer/non-Answer dichotomy, ME with level 2 variables and all optimizers}\\\\\n\\toprule\nMethod & Estimation result\\\\\n\\midrule\nNelder\\_Mead & Model failed to converge with max grad  = 0.425244 (tol = 0.002, component 1)\\\\\nbobyqa & Model failed to converge with max grad  = 0.0157886 (tol = 0.002, component 1)\\\\\nnlminbwrap & Model failed to converge with max grad  = 1.66793 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_BOBYQA & Model failed to converge with max grad  = 0.0678025 (tol = 0.002, component 1)\\\\\nnloptwrap.NLOPT\\_LN\\_NELDERMEAD & Model failed to converge with max grad  = 0.081166 (tol = 0.002, component 1)\\\\\n\\addlinespace\noptimx.L.BFGS.B & Model failed to converge with max grad  = 0.0682182 (tol = 0.002, component 1)\\\\\n\\bottomrule\n\\end{longtable}\n\n\n:::\n\n```{.r .cell-code}\n# Log-Likelihoods\n(lliks <- sort(sapply(m5d.allfit_OK, logLik))) |> \n  kable(col.names = \"Log-likelihood\", booktabs = T, digits = 3)\n```\n\n::: {.cell-output-display}\n\n\n|                              | Log-likelihood|\n|:-----------------------------|--------------:|\n|Nelder_Mead                   |      -20537.76|\n|nlminbwrap                    |      -20537.73|\n|optimx.L-BFGS-B               |      -20537.73|\n|nloptwrap.NLOPT_LN_BOBYQA     |      -20537.73|\n|nloptwrap.NLOPT_LN_NELDERMEAD |      -20537.73|\n|bobyqa                        |      -20537.73|\n\n\n:::\n\n```{.r .cell-code}\n# Coefficients from different optimizers\n  \n  ## Export fixef and melt into single dataframe\n  models <- levels(melt(t(sapply(m5d.allfit_OK, fixef)))$Var1)\n  m5d.allfit.fixef.m <- transform(melt(t(sapply(m5d.allfit_OK, fixef))), \n                                  Var1 = factor(Var1, levels = names(lliks))) |> \n    transmute(`Method` = Var1,\n              `Coefficient` = value,\n              `Variable` = case_when(\n                Var2 == \"(Intercept)\" ~ \"Intercept\",\n                Var2 == \"sexFemale\" ~ \"Sex: Female\",\n                Var2 == \"sexOther\" ~ \"Sex: Other\",\n                Var2 == \"age_bin18-24\" ~ \"Age: 18-24 (ref 25-44)\",\n                Var2 == \"age_bin45-64\" ~ \"Age: 45-65 (ref 25-44)\",\n                Var2 == \"age_bin65+\" ~ \"Age: 65 + (ref 25-44)\",\n                Var2 == \"time_to_vs.less_than_hourYes\" ~ \n                  \"Took < 1 hour to get to the voting station\",\n                Var2 == \"out_of_Russia_timeAfter invasion\" ~\n                  \"Moved after March 2022 (ref before 2014)\",\n                Var2 == \"out_of_Russia_time2 - 5 years\" ~\n                  paste(\"Moved after March 2019 but before\",\n                        \"March 2022 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeAfter annexation\" ~\n                  paste(\"Moved after March 2014 but before\",\n                        \"March 2019 (ref before 2014)\"),\n                Var2 == \"out_of_Russia_timeTourist (lives in Russia)\" ~\n                  paste(\"Didn't move - tourist, lives\",\n                        \"in Russia (ref before 2014)\"),\n                Var2 == \"result_trust_binDon't know\" ~\n                  \"Trust in the result: Don't know (ref Yes)\",\n                Var2 == \"result_trust_binNo\" ~\n                  \"Trust in the result: No (ref Yes)\",\n                Var2 == \"orthodox_share\" ~ \"Share of Orthodox Christians\",\n                Var2 == \"vdem_polyarchy_2022\" ~ \"Polyarchy index\",\n                Var2 == \"log(mad_gdppc_2018)\" ~ \"GDP per capita (log)\",\n                Var2 == \"obl_type1\" ~ \"Military agreements: 1 (ref 0)\",\n                Var2 == \"obl_type2\" ~ \"Military agreements: 2 (ref 0)\",\n                Var2 == \"obl_type3\" ~ \"Military agreements: 3 (ref 0)\",\n                Var2 == \"obl_type4\" ~ \"Military agreements: 4 (ref 0)\",\n                Var2 == \"export_share\" ~ \"Export share\",\n                Var2 == \"import_share\" ~ \"Import share\",\n                Var2 == \"friendly_statusUnfriendly\" ~ \n                  \"Unfriendly status (ref Neutral)\",\n                Var2 == \"friendly_statusFriendly\" ~ \n                  \"Friendly status (ref Neutral)\",\n                Var2 == \"help\" ~ \"Help to Ukraine\",\n                Var2 == \"military_dummy\" ~ \"Russian military presence\",\n                Var2 == \"log(dist)\" ~ \"Geodesic distance (log)\"),\n              )\n  \n  ## Plot\n  ggplot(m5d.allfit.fixef.m, \n           aes(x = `Coefficient`, y = `Method`, colour = `Method`)) +\n      geom_point() +\n      facet_wrap(~ `Variable`, scale = \"free\") +\n      scale_colour_brewer(palette = \"Dark2\") +\n      scale_y_discrete(breaks = models,\n                       labels = substr(models, 1, 3)) +\n      labs(x = \"\", y = \"\") + \n      theme_minimal() +\n      theme(legend.position = \"none\",\n            axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](mixed_effects_models_files/figure-pdf/nested_logit_mixed_effects_m5d_davankov_lvl2_diagnostics-1.pdf)\n:::\n\n```{.r .cell-code}\n# Check m5d-specific diagnostics\n  \n# Gradient 1\n  derivs1 <- m5d.nested@optinfo$derivs\n  sc_grad1 <- with(derivs1, solve(Hessian, gradient))\n  gradres1 <- max(pmin(abs(sc_grad1), abs(derivs1$gradient)))\n\n# Gradient 2\n  dd <- update(m5d.nested, devFunOnly = TRUE)\n  pars <- unlist(getME(m5d.nested, c(\"theta\", \"fixef\")))\n  grad2 <- grad(dd, pars)\n  hess2 <- hessian(dd, pars)\n  sc_grad2 <- solve(hess2, grad2)\n  gradres2 <- max(pmin(abs(sc_grad2), abs(grad2)))\n\n  ## The gradient cutoffs for Nelder Mead (nlopt), bobyqa and nlminwrap seem to \n  ## be close to what I am getting. \n\n# Check for singular fit \nsingres <- if_else(isSingular(m5d.nested), \"Yes\", \"No\")\n  \n# Display diagnostics\nkable(cbind(gradres1, gradres2, singres), \n      booktabs = T, digits = 3,\n      col.names = c(\"Gradient, method I\", \"Gradient, method II\", \n                    \"Singular fit?\"),\n      caption = paste(\"Diagnostics for `Davankov vs Spoil the ballot`\", \n                      \"model (with preferred optimizer)\"))\n```\n\n::: {.cell-output-display}\n\n\nTable: Diagnostics for `Davankov vs Spoil the ballot` model (with preferred optimizer)\n\n|Gradient, method I |Gradient, method II |Singular fit? |\n|:------------------|:-------------------|:-------------|\n|0.0040686829458804 |0.00394873324194497 |No            |\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsave(list = c(\"m5a.nested\", \"m5p.nested\", \"m5s.nested\", \"m5s.red\", \"m5d.nested\"), \n     file = \"nlme_bobyqa.RData\")\n\nsave(list = c(\"m4a.nested\", \"m4p.nested\", \"m4s.nested\", \"m4d.nested\"), \n     file = \"feme_bobyqa.RData\")\n\nsave(list = c(\"m5a.allfit\", \"m5p.allfit\", \"m5d.allfit\"), \n     file = \"me_allfit.RData\")\n```\n:::\n\n\n```{.r .cell-code}\nresizebox.stargazer(m4a.nested, m4p.nested, m4s.nested, m4d.nested, \n          title = \"Mixed effects models, level 1\", header = F,\n          dep.var.labels = c(\"Declined to answer vs answer\", \n                             \"Putin vs everyone else\", \n                             \"Non-systemic vs systemic opposition\",\n                             \"Davankov vs Spoiled\"),\n          tab.height = \"\\\\textheight\", tab.width= \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models, level 1} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & Declined to answer vs answer & Putin vs everyone else & Non-systemic vs systemic opposition & Davankov vs Spoiled \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.275$^{***}$ & 0.482$^{***}$ & 0.022 & $-$0.199$^{***}$ \\\\ \n  & (0.044) & (0.071) & (0.056) & (0.024) \\\\ \n  & & & & \\\\ \n sexOther & 0.064 & 0.171 & $-$0.375 & $-$0.470$^{***}$ \\\\ \n  & (0.237) & (0.368) & (0.296) & (0.144) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & $-$0.003 & 0.026 & $-$0.095 & 0.062$^{*}$ \\\\ \n  & (0.081) & (0.124) & (0.086) & (0.037) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & 0.180$^{***}$ & 1.322$^{***}$ & $-$0.302$^{***}$ & $-$0.826$^{***}$ \\\\ \n  & (0.059) & (0.086) & (0.087) & (0.039) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & 0.170$^{**}$ & 1.507$^{***}$ & $-$0.957$^{***}$ & $-$0.931$^{***}$ \\\\ \n  & (0.077) & (0.131) & (0.155) & (0.106) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & 0.376$^{***}$ & 0.094 & $-$0.099 & $-$0.034 \\\\ \n  & (0.052) & (0.081) & (0.061) & (0.026) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & $-$0.207$^{***}$ & $-$1.480$^{***}$ & 0.409$^{***}$ & 0.454$^{***}$ \\\\ \n  & (0.075) & (0.109) & (0.091) & (0.042) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & $-$0.159$^{**}$ & $-$0.806$^{***}$ & 0.296$^{***}$ & 0.219$^{***}$ \\\\ \n  & (0.080) & (0.120) & (0.102) & (0.045) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & $-$0.359$^{***}$ & $-$2.330$^{***}$ & 0.766$^{***}$ & 0.565$^{***}$ \\\\ \n  & (0.069) & (0.101) & (0.084) & (0.040) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & $-$0.039 & $-$0.975$^{***}$ & 0.041 & 0.652$^{***}$ \\\\ \n  & (0.096) & (0.143) & (0.144) & (0.087) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.499$^{***}$ & $-$3.960$^{***}$ & 0.718$^{***}$ & 0.387$^{***}$ \\\\ \n  & (0.082) & (0.109) & (0.127) & (0.139) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & $-$1.328$^{***}$ & $-$7.218$^{***}$ & 1.903$^{***}$ & $-$0.806$^{***}$ \\\\ \n  & (0.060) & (0.101) & (0.094) & (0.105) \\\\ \n  & & & & \\\\ \n Constant & $-$2.658$^{***}$ & 1.992$^{***}$ & 1.267$^{***}$ & 1.558$^{***}$ \\\\ \n  & (0.123) & (0.158) & (0.123) & (0.117) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 53,824 & 51,202 & 42,363 & 40,946 \\\\ \nLog Likelihood & $-$9,143.189 & $-$3,369.086 & $-$5,864.162 & $-$22,658.160 \\\\ \nAkaike Inf. Crit. & 18,314.380 & 6,766.172 & 11,756.320 & 45,344.320 \\\\ \nBayesian Inf. Crit. & 18,438.890 & 6,889.982 & 11,877.480 & 45,465.000 \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n\n```{.r .cell-code}\nm3.answer <- models(m3.nested.fe, 1)\nm3.putin <- models(m3.nested.fe, 2)\nm3.nonsys <- models(m3.nested.fe, 3)\nm3.davankov <- models(m3.nested.fe, 4)\n\n\nresizebox.stargazer(m4a.nested, m3.answer, m4p.nested, m3.putin, \n          title = \"Mixed effects models, comparison I\", header = F,\n          omit = \"as.factor\",\n          dep.var.labels = c(\"Declined to answer vs answer\", \n                             \"Declined to answer vs answer\", \n                             \"Putin vs everyone else\", \n                             \"Putin vs everyone else\"\n                             ),\n          tab.height = \"\\\\textheight\", tab.width= \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models, comparison I} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & Declined to answer vs answer & Declined to answer vs answer & Putin vs everyone else & Putin vs everyone else \\\\ \n\\\\[-1.8ex] & \\textit{generalized linear} & \\textit{logistic} & \\textit{generalized linear} & \\textit{logistic} \\\\ \n & \\textit{mixed-effects} & \\textit{} & \\textit{mixed-effects} & \\textit{} \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.275$^{***}$ & 0.275$^{***}$ & 0.482$^{***}$ & 0.481$^{***}$ \\\\ \n  & (0.044) & (0.044) & (0.071) & (0.072) \\\\ \n  & & & & \\\\ \n sexOther & 0.064 & 0.039 & 0.171 & 0.208 \\\\ \n  & (0.237) & (0.240) & (0.368) & (0.369) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & $-$0.003 & $-$0.008 & 0.026 & 0.019 \\\\ \n  & (0.081) & (0.082) & (0.124) & (0.126) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & 0.180$^{***}$ & 0.172$^{***}$ & 1.322$^{***}$ & 1.304$^{***}$ \\\\ \n  & (0.059) & (0.059) & (0.086) & (0.087) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & 0.170$^{**}$ & 0.161$^{**}$ & 1.507$^{***}$ & 1.501$^{***}$ \\\\ \n  & (0.077) & (0.078) & (0.131) & (0.132) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & 0.376$^{***}$ & 0.310$^{***}$ & 0.094 & 0.071 \\\\ \n  & (0.052) & (0.055) & (0.081) & (0.085) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & $-$0.207$^{***}$ & $-$0.217$^{***}$ & $-$1.480$^{***}$ & $-$1.467$^{***}$ \\\\ \n  & (0.075) & (0.075) & (0.109) & (0.110) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & $-$0.159$^{**}$ & $-$0.179$^{**}$ & $-$0.806$^{***}$ & $-$0.798$^{***}$ \\\\ \n  & (0.080) & (0.081) & (0.120) & (0.121) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & $-$0.359$^{***}$ & $-$0.363$^{***}$ & $-$2.330$^{***}$ & $-$2.357$^{***}$ \\\\ \n  & (0.069) & (0.069) & (0.101) & (0.103) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & $-$0.039 & $-$0.002 & $-$0.975$^{***}$ & $-$0.997$^{***}$ \\\\ \n  & (0.096) & (0.098) & (0.143) & (0.146) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.499$^{***}$ & 0.521$^{***}$ & $-$3.960$^{***}$ & $-$3.955$^{***}$ \\\\ \n  & (0.082) & (0.083) & (0.109) & (0.110) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & $-$1.328$^{***}$ & $-$1.293$^{***}$ & $-$7.218$^{***}$ & $-$7.204$^{***}$ \\\\ \n  & (0.060) & (0.060) & (0.101) & (0.102) \\\\ \n  & & & & \\\\ \n Constant & $-$2.658$^{***}$ & $-$2.146$^{***}$ & 1.992$^{***}$ & 1.379$^{***}$ \\\\ \n  & (0.123) & (0.144) & (0.158) & (0.247) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 53,824 & 53,824 & 51,202 & 51,202 \\\\ \nLog Likelihood & $-$9,143.189 & $-$9,008.215 & $-$3,369.086 & $-$3,287.206 \\\\ \nAkaike Inf. Crit. & 18,314.380 & 18,166.430 & 6,766.172 & 6,724.412 \\\\ \nBayesian Inf. Crit. & 18,438.890 &  & 6,889.982 &  \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n\n```{.r .cell-code}\nresizebox.stargazer(m4s.nested, m3.nonsys, m4d.nested, m3.davankov, \n          title = \"Mixed effects models, comparison II\", header = F,\n          omit = \"as.factor\",\n          dep.var.labels = c(\"Non-systemic vs systemic opposition\",\n                             \"Non-systemic vs systemic opposition\",\n                             \"Davankov vs Spoiled\",\n                             \"Davankov vs Spoiled\"\n                             ),\n          tab.height = \"\\\\textheight\", tab.width= \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models, comparison II} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & Non-systemic vs systemic opposition & Non-systemic vs systemic opposition & Davankov vs Spoiled & Davankov vs Spoiled \\\\ \n\\\\[-1.8ex] & \\textit{generalized linear} & \\textit{logistic} & \\textit{generalized linear} & \\textit{logistic} \\\\ \n & \\textit{mixed-effects} & \\textit{} & \\textit{mixed-effects} & \\textit{} \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.022 & 0.019 & $-$0.199$^{***}$ & $-$0.195$^{***}$ \\\\ \n  & (0.056) & (0.057) & (0.024) & (0.024) \\\\ \n  & & & & \\\\ \n sexOther & $-$0.375 & $-$0.371 & $-$0.470$^{***}$ & $-$0.455$^{***}$ \\\\ \n  & (0.296) & (0.301) & (0.144) & (0.146) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & $-$0.095 & $-$0.114 & 0.062$^{*}$ & 0.072$^{*}$ \\\\ \n  & (0.086) & (0.088) & (0.037) & (0.037) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & $-$0.302$^{***}$ & $-$0.294$^{***}$ & $-$0.826$^{***}$ & $-$0.827$^{***}$ \\\\ \n  & (0.087) & (0.088) & (0.039) & (0.039) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & $-$0.957$^{***}$ & $-$0.994$^{***}$ & $-$0.931$^{***}$ & $-$0.952$^{***}$ \\\\ \n  & (0.155) & (0.159) & (0.106) & (0.107) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & $-$0.099 & $-$0.086 & $-$0.034 & $-$0.028 \\\\ \n  & (0.061) & (0.067) & (0.026) & (0.027) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & 0.409$^{***}$ & 0.419$^{***}$ & 0.454$^{***}$ & 0.438$^{***}$ \\\\ \n  & (0.091) & (0.093) & (0.042) & (0.042) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & 0.296$^{***}$ & 0.299$^{***}$ & 0.219$^{***}$ & 0.213$^{***}$ \\\\ \n  & (0.102) & (0.103) & (0.045) & (0.046) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & 0.766$^{***}$ & 0.820$^{***}$ & 0.565$^{***}$ & 0.539$^{***}$ \\\\ \n  & (0.084) & (0.090) & (0.040) & (0.040) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & 0.041 & 0.134 & 0.652$^{***}$ & 0.633$^{***}$ \\\\ \n  & (0.144) & (0.150) & (0.087) & (0.088) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.718$^{***}$ & 0.716$^{***}$ & 0.387$^{***}$ & 0.392$^{***}$ \\\\ \n  & (0.127) & (0.129) & (0.139) & (0.141) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & 1.903$^{***}$ & 1.891$^{***}$ & $-$0.806$^{***}$ & $-$0.804$^{***}$ \\\\ \n  & (0.094) & (0.095) & (0.105) & (0.106) \\\\ \n  & & & & \\\\ \n Constant & 1.267$^{***}$ & 1.223$^{***}$ & 1.558$^{***}$ & 1.401$^{***}$ \\\\ \n  & (0.123) & (0.198) & (0.117) & (0.130) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 42,363 & 42,363 & 40,946 & 40,946 \\\\ \nLog Likelihood & $-$5,864.162 & $-$5,809.709 & $-$22,658.160 & $-$22,553.850 \\\\ \nAkaike Inf. Crit. & 11,756.320 & 11,769.420 & 45,344.320 & 45,257.690 \\\\ \nBayesian Inf. Crit. & 11,877.480 &  & 45,465.000 &  \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n\n```{.r .cell-code}\nresizebox.stargazer(m5a.nested, m5p.nested, m5s.red, m5d.nested, \n          title = \"Mixed effects models with level 2\", header = F,\n          omit = \"as.factor\",\n          dep.var.labels = c(\"Declined to answer vs answer\", \n                             \"Putin vs everyone else\", \n                             \"Non-systemic vs systemic opposition\",\n                             \"Davankov vs Spoiled\"\n                             ),\n          tab.height = \"\\\\textheight\", tab.width= \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models with level 2} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & Declined to answer vs answer & Putin vs everyone else & Non-systemic vs systemic opposition & Davankov vs Spoiled \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.258$^{***}$ & 0.489$^{***}$ & 0.015 & $-$0.186$^{***}$ \\\\ \n  & (0.045) & (0.073) & (0.059) & (0.025) \\\\ \n  & & & & \\\\ \n sexOther & 0.071 & 0.176 & $-$0.232 & $-$0.462$^{***}$ \\\\ \n  & (0.240) & (0.376) & (0.328) & (0.148) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & 0.036 & 0.040 & $-$0.117 & 0.064$^{*}$ \\\\ \n  & (0.083) & (0.125) & (0.088) & (0.038) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & 0.194$^{***}$ & 1.316$^{***}$ & $-$0.299$^{***}$ & $-$0.823$^{***}$ \\\\ \n  & (0.060) & (0.089) & (0.090) & (0.040) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & 0.175$^{**}$ & 1.491$^{***}$ & $-$0.930$^{***}$ & $-$0.906$^{***}$ \\\\ \n  & (0.078) & (0.134) & (0.159) & (0.108) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & 0.355$^{***}$ & 0.054 & $-$0.081 & $-$0.041 \\\\ \n  & (0.054) & (0.084) & (0.065) & (0.027) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & $-$0.175$^{**}$ & $-$1.496$^{***}$ & 0.402$^{***}$ & 0.444$^{***}$ \\\\ \n  & (0.076) & (0.111) & (0.093) & (0.042) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & $-$0.134$^{*}$ & $-$0.826$^{***}$ & 0.318$^{***}$ & 0.214$^{***}$ \\\\ \n  & (0.081) & (0.121) & (0.103) & (0.045) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & $-$0.351$^{***}$ & $-$2.329$^{***}$ & 0.817$^{***}$ & 0.540$^{***}$ \\\\ \n  & (0.071) & (0.103) & (0.090) & (0.040) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & $-$0.018 & $-$1.014$^{***}$ & 0.148 & 0.647$^{***}$ \\\\ \n  & (0.099) & (0.148) & (0.153) & (0.090) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.551$^{***}$ & $-$3.956$^{***}$ & 0.700$^{***}$ & 0.331$^{**}$ \\\\ \n  & (0.084) & (0.111) & (0.133) & (0.146) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & $-$1.355$^{***}$ & $-$7.238$^{***}$ & 1.910$^{***}$ & $-$0.839$^{***}$ \\\\ \n  & (0.062) & (0.103) & (0.098) & (0.111) \\\\ \n  & & & & \\\\ \n orthodox\\_share & $-$0.472 & 1.888$^{***}$ & $-$0.360$^{**}$ & 0.071 \\\\ \n  & (0.468) & (0.412) & (0.142) & (0.163) \\\\ \n  & & & & \\\\ \n vdem\\_polyarchy\\_2022 & 0.328 & $-$0.959 & 0.532$^{**}$ & $-$0.561$^{**}$ \\\\ \n  & (0.668) & (0.674) & (0.250) & (0.233) \\\\ \n  & & & & \\\\ \n log(mad\\_gdppc\\_2018) & $-$0.280 & $-$0.336$^{*}$ & 0.036 & 0.037 \\\\ \n  & (0.174) & (0.176) & (0.088) & (0.072) \\\\ \n  & & & & \\\\ \n obl\\_type1 & $-$0.412 & $-$0.683 &  & 0.084 \\\\ \n  & (0.471) & (0.454) &  & (0.162) \\\\ \n  & & & & \\\\ \n obl\\_type2 & $-$0.900$^{*}$ & $-$0.705 &  & 0.160 \\\\ \n  & (0.507) & (0.485) &  & (0.171) \\\\ \n  & & & & \\\\ \n obl\\_type3 & $-$0.653 & $-$0.592 &  & 0.014 \\\\ \n  & (0.463) & (0.427) &  & (0.162) \\\\ \n  & & & & \\\\ \n obl\\_type4 & $-$0.826 & 0.149 &  & $-$0.132 \\\\ \n  & (0.814) & (0.739) &  & (0.278) \\\\ \n  & & & & \\\\ \n export\\_share & $-$0.174$^{***}$ & $-$0.061 & 0.030 & 0.018 \\\\ \n  & (0.062) & (0.058) & (0.024) & (0.016) \\\\ \n  & & & & \\\\ \n import\\_share & 0.217$^{***}$ & 0.123$^{**}$ & $-$0.020 & $-$0.018 \\\\ \n  & (0.063) & (0.056) & (0.020) & (0.018) \\\\ \n  & & & & \\\\ \n friendly\\_statusUnfriendly & 0.622 & 0.103 &  & 0.149 \\\\ \n  & (0.819) & (0.794) &  & (0.284) \\\\ \n  & & & & \\\\ \n friendly\\_statusFriendly & 0.430 & $-$0.279 &  & 0.264 \\\\ \n  & (0.480) & (0.466) &  & (0.183) \\\\ \n  & & & & \\\\ \n help & $-$1.003$^{**}$ & $-$0.599 & $-$0.124 & $-$0.255 \\\\ \n  & (0.476) & (0.532) & (0.194) & (0.196) \\\\ \n  & & & & \\\\ \n military\\_dummy & 0.085 & $-$1.367$^{**}$ & 0.224 & 0.254 \\\\ \n  & (0.728) & (0.678) & (0.195) & (0.264) \\\\ \n  & & & & \\\\ \n log(dist) & $-$0.386$^{**}$ & 0.212 & $-$0.150$^{***}$ & 0.074 \\\\ \n  & (0.151) & (0.144) & (0.057) & (0.050) \\\\ \n  & & & & \\\\ \n Constant & 3.842$^{*}$ & 5.416$^{***}$ & 1.739$^{*}$ & 0.991 \\\\ \n  & (1.965) & (2.091) & (1.051) & (0.907) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 48,964 & 46,494 & 37,827 & 36,523 \\\\ \nLog Likelihood & $-$8,472.302 & $-$3,178.423 & $-$5,342.410 & $-$20,537.730 \\\\ \nAkaike Inf. Crit. & 17,000.600 & 6,412.846 & 10,728.820 & 41,131.460 \\\\ \nBayesian Inf. Crit. & 17,246.970 & 6,657.764 & 10,916.720 & 41,369.610 \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n\n```{.r .cell-code}\nresizebox.stargazer(m4a.nested, m5a.nested, m4p.nested, m5p.nested, \n          title = \"Mixed effects models with level 2, comparison I\", header = F,\n          omit = \"as.factor\",\n          dep.var.labels = c(\"Declined to answer vs answer\", \n                             \"Declined to answer vs answer\", \n                             \"Putin vs everyone else\", \n                             \"Putin vs everyone else\"\n                             ),\n          tab.height = \"\\\\textheight\", tab.width= \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models with level 2, comparison I} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & \\multicolumn{2}{c}{Declined to answer vs answer} & \\multicolumn{2}{c}{Declined to answer vs answer} \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.275$^{***}$ & 0.258$^{***}$ & 0.482$^{***}$ & 0.489$^{***}$ \\\\ \n  & (0.044) & (0.045) & (0.071) & (0.073) \\\\ \n  & & & & \\\\ \n sexOther & 0.064 & 0.071 & 0.171 & 0.176 \\\\ \n  & (0.237) & (0.240) & (0.368) & (0.376) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & $-$0.003 & 0.036 & 0.026 & 0.040 \\\\ \n  & (0.081) & (0.083) & (0.124) & (0.125) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & 0.180$^{***}$ & 0.194$^{***}$ & 1.322$^{***}$ & 1.316$^{***}$ \\\\ \n  & (0.059) & (0.060) & (0.086) & (0.089) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & 0.170$^{**}$ & 0.175$^{**}$ & 1.507$^{***}$ & 1.491$^{***}$ \\\\ \n  & (0.077) & (0.078) & (0.131) & (0.134) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & 0.376$^{***}$ & 0.355$^{***}$ & 0.094 & 0.054 \\\\ \n  & (0.052) & (0.054) & (0.081) & (0.084) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & $-$0.207$^{***}$ & $-$0.175$^{**}$ & $-$1.480$^{***}$ & $-$1.496$^{***}$ \\\\ \n  & (0.075) & (0.076) & (0.109) & (0.111) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & $-$0.159$^{**}$ & $-$0.134$^{*}$ & $-$0.806$^{***}$ & $-$0.826$^{***}$ \\\\ \n  & (0.080) & (0.081) & (0.120) & (0.121) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & $-$0.359$^{***}$ & $-$0.351$^{***}$ & $-$2.330$^{***}$ & $-$2.329$^{***}$ \\\\ \n  & (0.069) & (0.071) & (0.101) & (0.103) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & $-$0.039 & $-$0.018 & $-$0.975$^{***}$ & $-$1.014$^{***}$ \\\\ \n  & (0.096) & (0.099) & (0.143) & (0.148) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.499$^{***}$ & 0.551$^{***}$ & $-$3.960$^{***}$ & $-$3.956$^{***}$ \\\\ \n  & (0.082) & (0.084) & (0.109) & (0.111) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & $-$1.328$^{***}$ & $-$1.355$^{***}$ & $-$7.218$^{***}$ & $-$7.238$^{***}$ \\\\ \n  & (0.060) & (0.062) & (0.101) & (0.103) \\\\ \n  & & & & \\\\ \n orthodox\\_share &  & $-$0.472 &  & 1.888$^{***}$ \\\\ \n  &  & (0.468) &  & (0.412) \\\\ \n  & & & & \\\\ \n vdem\\_polyarchy\\_2022 &  & 0.328 &  & $-$0.959 \\\\ \n  &  & (0.668) &  & (0.674) \\\\ \n  & & & & \\\\ \n log(mad\\_gdppc\\_2018) &  & $-$0.280 &  & $-$0.336$^{*}$ \\\\ \n  &  & (0.174) &  & (0.176) \\\\ \n  & & & & \\\\ \n obl\\_type1 &  & $-$0.412 &  & $-$0.683 \\\\ \n  &  & (0.471) &  & (0.454) \\\\ \n  & & & & \\\\ \n obl\\_type2 &  & $-$0.900$^{*}$ &  & $-$0.705 \\\\ \n  &  & (0.507) &  & (0.485) \\\\ \n  & & & & \\\\ \n obl\\_type3 &  & $-$0.653 &  & $-$0.592 \\\\ \n  &  & (0.463) &  & (0.427) \\\\ \n  & & & & \\\\ \n obl\\_type4 &  & $-$0.826 &  & 0.149 \\\\ \n  &  & (0.814) &  & (0.739) \\\\ \n  & & & & \\\\ \n export\\_share &  & $-$0.174$^{***}$ &  & $-$0.061 \\\\ \n  &  & (0.062) &  & (0.058) \\\\ \n  & & & & \\\\ \n import\\_share &  & 0.217$^{***}$ &  & 0.123$^{**}$ \\\\ \n  &  & (0.063) &  & (0.056) \\\\ \n  & & & & \\\\ \n friendly\\_statusUnfriendly &  & 0.622 &  & 0.103 \\\\ \n  &  & (0.819) &  & (0.794) \\\\ \n  & & & & \\\\ \n friendly\\_statusFriendly &  & 0.430 &  & $-$0.279 \\\\ \n  &  & (0.480) &  & (0.466) \\\\ \n  & & & & \\\\ \n help &  & $-$1.003$^{**}$ &  & $-$0.599 \\\\ \n  &  & (0.476) &  & (0.532) \\\\ \n  & & & & \\\\ \n military\\_dummy &  & 0.085 &  & $-$1.367$^{**}$ \\\\ \n  &  & (0.728) &  & (0.678) \\\\ \n  & & & & \\\\ \n log(dist) &  & $-$0.386$^{**}$ &  & 0.212 \\\\ \n  &  & (0.151) &  & (0.144) \\\\ \n  & & & & \\\\ \n Constant & $-$2.658$^{***}$ & 3.842$^{*}$ & 1.992$^{***}$ & 5.416$^{***}$ \\\\ \n  & (0.123) & (1.965) & (0.158) & (2.091) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 53,824 & 48,964 & 51,202 & 46,494 \\\\ \nLog Likelihood & $-$9,143.189 & $-$8,472.302 & $-$3,369.086 & $-$3,178.423 \\\\ \nAkaike Inf. Crit. & 18,314.380 & 17,000.600 & 6,766.172 & 6,412.846 \\\\ \nBayesian Inf. Crit. & 18,438.890 & 17,246.970 & 6,889.982 & 6,657.764 \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n\n```{.r .cell-code}\nresizebox.stargazer(m4s.nested, m5s.red, m4d.nested, m5d.nested, \n          title = \"Mixed effects models with level 2, comparison II\", header = F,\n          omit = \"as.factor\",\n          dep.var.labels = c(\"Non-systemic vs systemic opposition\",\n                             \"Non-systemic vs systemic opposition\",\n                             \"Davankov vs Spoiled\",\n                             \"Davankov vs Spoiled\"\n                             ),\n          tab.height = \"\\\\textheight\", tab.width = \"\\\\textwidth\")\n```\n\n\n\\begin{table}[!htbp] \\centering \n  \\caption{Mixed effects models with level 2, comparison II} \n  \\label{} \n\\resizebox*{\\textwidth}{\\textheight}{%\n\\begin{tabular}{@{\\extracolsep{5pt}}lcccc} \n\\\\[-1.8ex]\\hline \n\\hline \\\\[-1.8ex] \n & \\multicolumn{4}{c}{\\textit{Dependent variable:}} \\\\ \n\\cline{2-5} \n\\\\[-1.8ex] & \\multicolumn{2}{c}{Non-systemic vs systemic opposition} & \\multicolumn{2}{c}{Non-systemic vs systemic opposition} \\\\ \n\\\\[-1.8ex] & (1) & (2) & (3) & (4)\\\\ \n\\hline \\\\[-1.8ex] \n sexFemale & 0.022 & 0.015 & $-$0.199$^{***}$ & $-$0.186$^{***}$ \\\\ \n  & (0.056) & (0.059) & (0.024) & (0.025) \\\\ \n  & & & & \\\\ \n sexOther & $-$0.375 & $-$0.232 & $-$0.470$^{***}$ & $-$0.462$^{***}$ \\\\ \n  & (0.296) & (0.328) & (0.144) & (0.148) \\\\ \n  & & & & \\\\ \n age\\_bin18-24 & $-$0.095 & $-$0.117 & 0.062$^{*}$ & 0.064$^{*}$ \\\\ \n  & (0.086) & (0.088) & (0.037) & (0.038) \\\\ \n  & & & & \\\\ \n age\\_bin45-64 & $-$0.302$^{***}$ & $-$0.299$^{***}$ & $-$0.826$^{***}$ & $-$0.823$^{***}$ \\\\ \n  & (0.087) & (0.090) & (0.039) & (0.040) \\\\ \n  & & & & \\\\ \n age\\_bin65+ & $-$0.957$^{***}$ & $-$0.930$^{***}$ & $-$0.931$^{***}$ & $-$0.906$^{***}$ \\\\ \n  & (0.155) & (0.159) & (0.106) & (0.108) \\\\ \n  & & & & \\\\ \n time\\_to\\_vs.less\\_than\\_hourYes & $-$0.099 & $-$0.081 & $-$0.034 & $-$0.041 \\\\ \n  & (0.061) & (0.065) & (0.026) & (0.027) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_time2 - 5 years & 0.409$^{***}$ & 0.402$^{***}$ & 0.454$^{***}$ & 0.444$^{***}$ \\\\ \n  & (0.091) & (0.093) & (0.042) & (0.042) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter annexation & 0.296$^{***}$ & 0.318$^{***}$ & 0.219$^{***}$ & 0.214$^{***}$ \\\\ \n  & (0.102) & (0.103) & (0.045) & (0.045) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeAfter invasion & 0.766$^{***}$ & 0.817$^{***}$ & 0.565$^{***}$ & 0.540$^{***}$ \\\\ \n  & (0.084) & (0.090) & (0.040) & (0.040) \\\\ \n  & & & & \\\\ \n out\\_of\\_Russia\\_timeTourist (lives in Russia) & 0.041 & 0.148 & 0.652$^{***}$ & 0.647$^{***}$ \\\\ \n  & (0.144) & (0.153) & (0.087) & (0.090) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binDon't know & 0.718$^{***}$ & 0.700$^{***}$ & 0.387$^{***}$ & 0.331$^{**}$ \\\\ \n  & (0.127) & (0.133) & (0.139) & (0.146) \\\\ \n  & & & & \\\\ \n result\\_trust\\_binNo & 1.903$^{***}$ & 1.910$^{***}$ & $-$0.806$^{***}$ & $-$0.839$^{***}$ \\\\ \n  & (0.094) & (0.098) & (0.105) & (0.111) \\\\ \n  & & & & \\\\ \n orthodox\\_share &  & $-$0.360$^{**}$ &  & 0.071 \\\\ \n  &  & (0.142) &  & (0.163) \\\\ \n  & & & & \\\\ \n vdem\\_polyarchy\\_2022 &  & 0.532$^{**}$ &  & $-$0.561$^{**}$ \\\\ \n  &  & (0.250) &  & (0.233) \\\\ \n  & & & & \\\\ \n log(mad\\_gdppc\\_2018) &  & 0.036 &  & 0.037 \\\\ \n  &  & (0.088) &  & (0.072) \\\\ \n  & & & & \\\\ \n obl\\_type1 &  &  &  & 0.084 \\\\ \n  &  &  &  & (0.162) \\\\ \n  & & & & \\\\ \n obl\\_type2 &  &  &  & 0.160 \\\\ \n  &  &  &  & (0.171) \\\\ \n  & & & & \\\\ \n obl\\_type3 &  &  &  & 0.014 \\\\ \n  &  &  &  & (0.162) \\\\ \n  & & & & \\\\ \n obl\\_type4 &  &  &  & $-$0.132 \\\\ \n  &  &  &  & (0.278) \\\\ \n  & & & & \\\\ \n export\\_share &  & 0.030 &  & 0.018 \\\\ \n  &  & (0.024) &  & (0.016) \\\\ \n  & & & & \\\\ \n import\\_share &  & $-$0.020 &  & $-$0.018 \\\\ \n  &  & (0.020) &  & (0.018) \\\\ \n  & & & & \\\\ \n friendly\\_statusUnfriendly &  &  &  & 0.149 \\\\ \n  &  &  &  & (0.284) \\\\ \n  & & & & \\\\ \n friendly\\_statusFriendly &  &  &  & 0.264 \\\\ \n  &  &  &  & (0.183) \\\\ \n  & & & & \\\\ \n help &  & $-$0.124 &  & $-$0.255 \\\\ \n  &  & (0.194) &  & (0.196) \\\\ \n  & & & & \\\\ \n military\\_dummy &  & 0.224 &  & 0.254 \\\\ \n  &  & (0.195) &  & (0.264) \\\\ \n  & & & & \\\\ \n log(dist) &  & $-$0.150$^{***}$ &  & 0.074 \\\\ \n  &  & (0.057) &  & (0.050) \\\\ \n  & & & & \\\\ \n Constant & 1.267$^{***}$ & 1.739$^{*}$ & 1.558$^{***}$ & 0.991 \\\\ \n  & (0.123) & (1.051) & (0.117) & (0.907) \\\\ \n  & & & & \\\\ \n\\hline \\\\[-1.8ex] \nObservations & 42,363 & 37,827 & 40,946 & 36,523 \\\\ \nLog Likelihood & $-$5,864.162 & $-$5,342.410 & $-$22,658.160 & $-$20,537.730 \\\\ \nAkaike Inf. Crit. & 11,756.320 & 10,728.820 & 45,344.320 & 41,131.460 \\\\ \nBayesian Inf. Crit. & 11,877.480 & 10,916.720 & 45,465.000 & 41,369.610 \\\\ \n\\hline \n\\hline \\\\[-1.8ex] \n\\textit{Note:}  & \\multicolumn{4}{r}{$^{*}$p$<$0.1; $^{**}$p$<$0.05; $^{***}$p$<$0.01} \\\\ \n\\end{tabular} \n}\n\\end{table} \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "\\usepackage{booktabs}\n\\usepackage{longtable}\n\\usepackage{array}\n\\usepackage{multirow}\n\\usepackage{wrapfig}\n\\usepackage{float}\n\\usepackage{colortbl}\n\\usepackage{pdflscape}\n\\usepackage{tabu}\n\\usepackage{threeparttable}\n\\usepackage{threeparttablex}\n\\usepackage[normalem]{ulem}\n\\usepackage{makecell}\n\\usepackage{xcolor}\n"
      ]
    },
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}